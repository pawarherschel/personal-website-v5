---
import { getCollection } from "astro:content";
import { access, readFile } from "node:fs/promises";
import CVEntryCard from "@components/CVEntryCard.astro";
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation.ts";
import { sot } from "@/sot.ts";
import type { CVEntry } from "../../content/config.ts";
import MainGridLayout from "../../layouts/MainGridLayout.astro";

const {
	bibliography,
	education,
	projects,
	skills,
	certificates,
	publications,
	others,
} = sot;

if (!bibliography) {
	console.error("bibliography is falsy");
	console.log("got: ");
	console.log(JSON.stringify(bibliography));
}
if (!education) {
	console.error("education is falsy");
	console.log("got: ");
	console.log(JSON.stringify(education));
}
if (!projects) {
	console.error("projects is falsy");
	console.log("got: ");
	console.log(JSON.stringify(projects));
}
if (!skills) {
	console.error("skills is falsy");
	console.log("got: ");
	console.log(JSON.stringify(skills));
}
if (!certificates) {
	console.error("certificate is falsy");
	console.log("got: ");
	console.log(JSON.stringify(certificates));
}
if (!publications) {
	console.error("publications is falsy");
	console.log("got: ");
	console.log(JSON.stringify(publications));
}
if (!others) {
	console.error("others is falsy");
	console.log("got: ");
	console.log(JSON.stringify(others));
}
---
<MainGridLayout title={i18n(I18nKey.portfolio)}>
	<div class="flex w-full flex-col rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
		{(projects) &&
				<div
						class="card-base z-10 px-9 py-6 mb-6  relative w-full rounded-[var(--radius-large)] bg-[var(--card-bg)] ">
					<h1 class="text-4xl font-bold text-90 text-[var(--text-color)] mb-4 text-center">Projects</h1>
					<div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div>
					<div
							class="transition flex flex-col rounded-[var(--radius-large)] bg-[var(--card-bg)] py-1 md:py-0 md:bg-transparent md:gap-4 mb-4">
						{
							projects.map((project) =>
									<CVEntryCard
											cv_entry={project}
									>
									</CVEntryCard>
							)
						}
					</div>
				</div>}
		<!-- {(publications) && -->
		<!-- <div -->
		<!-- class="card-base z-10 px-9 py-6 mb-6 relative w-full rounded-[var(--radius-large)] bg-[var(--card-bg)] "> -->
		<!-- <h1 class="text-4xl font-bold text-90 text-[var(--text-color)] mb-4 text-center">Publications</h1> -->
		<!-- <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div> -->
		<!-- <div -->
		<!-- class="transition flex flex-col rounded-[var(--radius-large)] bg-[var(--card-bg)] py-1 md:py-0 md:bg-transparent md:gap-4 mb-4"> -->
		<!-- { -->
		<!-- publications.map((publications) => -->
		<!-- <CVEntryCard -->
		<!-- cv_entry={publications} -->
		<!-- > -->
		<!-- </CVEntryCard> -->
		<!-- ) -->
		<!-- } -->
		<!-- </div> -->
		<!-- </div>} -->
		{(others) &&
				<div
						class="card-base z-10 px-9 py-6 mb-6 relative w-full rounded-[var(--radius-large)] bg-[var(--card-bg)] ">
					<h1 class="text-4xl font-bold text-90 text-[var(--text-color)] mb-4 text-center">Others</h1>
					<div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div>
					<div
							class="transition flex flex-col rounded-[var(--radius-large)] bg-[var(--card-bg)] py-1 md:py-0 md:bg-transparent md:gap-4 mb-4">
						{
							others.map((other) =>
									<CVEntryCard
											cv_entry={other}
									>
									</CVEntryCard>
							)
						}
					</div>
				</div>}
		<div class="card-base z-10 px-9 py-6 mb-6 relative w-full rounded-[var(--radius-large)] bg-[var(--card-bg)] ">
			<h1 class="text-4xl font-bold text-90 text-[var(--text-color)] mb-4 text-center">Education</h1>
			<div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div>
			<div class="transition flex flex-col rounded-[var(--radius-large)] bg-[var(--card-bg)] py-1 md:py-0 md:bg-transparent md:gap-4 mb-4">
				{
					education.map((education) =>
							<CVEntryCard
									cv_entry={education}
							>
							</CVEntryCard>
					)
				}
			</div>
		</div>
	</div>
</MainGridLayout>